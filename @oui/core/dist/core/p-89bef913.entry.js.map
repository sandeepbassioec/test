{"version":3,"names":["oToastCss","toastStack","Object","assign","document","createElement","style","OToast","constructor","hostRef","this","isVisible","isExiting","isEntering","open","closable","variant","duration","Infinity","handleCloseClick","hide","handleMouseEnter","pauseAutoHide","handleMouseLeave","resetAutoHide","handleTransitionEnd","event","target","propertyName","classList","contains","handleOpenChange","show","handleDurationChange","restartAutoHide","componentWillLoad","host","isConnected","oShow","emit","defaultPrevented","jest","parentElement","body","append","requestAnimationFrame","autoHideTimeout","window","setTimeout","oHide","clearTimeout","Promise","resolve","remove","childElementCount","toast","addEventListener","once","getIconDetails","iconName","iconColor","getVariantClasses","render","baseClass","stateClass","variantClass","h","Host","class","role","onTransitionEnd","onMouseEnter","onMouseLeave","name","color","size","onClick","label"],"sources":["src/components/o-toast/o-toast.scss?tag=o-toast&encapsulation=shadow","src/components/o-toast/o-toast.tsx"],"sourcesContent":[":host {\r\n\tdisplay: block;\r\n}\r\n","import type { EventEmitter } from '@stencil/core';\r\nimport { Component, Element, Event, h, Method, Prop, State, Watch, Host } from '@stencil/core';\r\nimport type { IconName } from '@fortawesome/fontawesome-svg-core';\r\n\r\nconst toastStack = Object.assign(document.createElement('div'), {\r\n\t// ToDo: When we expose root.css we should replace the\r\n\t// hardcoded properties with css variables.\r\n\t// position: var(--o-toast-stack-position);\r\n\t// top: var(--o-toast-stack-top);\r\n\t// right: var(--o-toast-stack-right);\r\n\t// z-index: var(--o-toast-stack-z-index);\r\n\tstyle: `\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 20px;\r\n        z-index: 9999;\r\n    `\r\n});\r\n\r\n@Component({\r\n\ttag: 'o-toast',\r\n\tstyleUrl: 'o-toast.scss',\r\n\tshadow: true\r\n})\r\nexport class OToast {\r\n\tprivate autoHideTimeout?: number;\r\n\r\n\t@Element() host!: HTMLOToastElement;\r\n\r\n\t@State() isVisible = false;\r\n\t@State() isExiting = false;\r\n\t@State() isEntering = false;\r\n\r\n\t/** Indicates whether or not the toast is open. */\r\n\t@Prop({ mutable: true, reflect: true }) open = false;\r\n\r\n\t/** Set to true to make the toast closable. */\r\n\t@Prop({ reflect: true }) closable = false;\r\n\r\n\t/** The variant of the toast. */\r\n\t@Prop({ mutable: true, reflect: true }) variant: 'primary' | 'success' | 'neutral' | 'warning' | 'danger' = 'primary';\r\n\r\n\t/** The length of time, in milliseconds, the toast will show before closing itself. */\r\n\t@Prop({ mutable: true, reflect: true }) duration = Infinity;\r\n\r\n\t/** Emitted when the toast opens. */\r\n\t@Event() oShow!: EventEmitter<void>;\r\n\r\n\t/** Emitted when the toast closes. */\r\n\t@Event() oHide!: EventEmitter<void>;\r\n\r\n\t@Watch('open')\r\n\thandleOpenChange() {\r\n\t\tthis.open ? this.show() : this.hide();\r\n\t}\r\n\r\n\t@Watch('duration')\r\n\thandleDurationChange() {\r\n\t\tthis.restartAutoHide();\r\n\t}\r\n\r\n\tcomponentWillLoad() {\r\n\t\tif (this.open) {\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Shows the toast. */\r\n\t@Method()\r\n\tasync show() {\r\n\t\tif (this.isVisible) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check if the host is connected to the DOM\r\n\t\tif (this.host.isConnected) {\r\n\t\t\tconst event = this.oShow.emit();\r\n\t\t\tif (event.defaultPrevented) {\r\n\t\t\t\tthis.open = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.isEntering = true;\r\n\t\tthis.isVisible = true;\r\n\t\tthis.open = true;\r\n\r\n\t\t/* istanbul ignore next */\r\n\t\t// Perform DOM manipulation if not in a testing environment\r\n\t\tif (typeof jest === 'undefined') {\r\n\t\t\t// Append the toastStack to the body if it's not already there\r\n\t\t\tif (!toastStack.parentElement) {\r\n\t\t\t\tdocument.body.append(toastStack);\r\n\t\t\t}\r\n\r\n\t\t\t// Append the current toast to the toastStack\r\n\t\t\ttoastStack.append(this.host);\r\n\t\t}\r\n\t\t/* istanbul ignore next */\r\n\t\t// RequestAnimationFrame for entering animation in non-test environments\r\n\t\tif (typeof requestAnimationFrame !== 'undefined') {\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\tthis.isEntering = false;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\t// Fallback for testing\r\n\t\t\tthis.isEntering = false;\r\n\t\t}\r\n\r\n\t\tif (this.duration < Infinity) {\r\n\t\t\tthis.autoHideTimeout = window.setTimeout(() => this.hide(), this.duration);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Hides the toast. */\r\n\t@Method()\r\n\tasync hide() {\r\n\t\tif (!this.isVisible) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst event = this.oHide.emit();\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\tthis.open = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tclearTimeout(this.autoHideTimeout);\r\n\t\tthis.isExiting = true;\r\n\t\tthis.isVisible = false;\r\n\t\tthis.open = false;\r\n\t\t/* istanbul ignore next */\r\n\t\t// Perform DOM manipulation if not in a testing environment\r\n\t\tif (typeof jest === 'undefined') {\r\n\t\t\t// Remove the toast from the stack after a delay\r\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 300));\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.open = false;\r\n\t\t\tthis.isExiting = false;\r\n\t\t\tthis.host.remove();\r\n\t\t\tif (toastStack.childElementCount === 0) {\r\n\t\t\t\ttoastStack.remove();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/** Displays the toast notification. */\r\n\t@Method()\r\n\tasync toast() {\r\n\t\treturn new Promise<void>((resolve) => {\r\n\t\t\t/* istanbul ignore next */\r\n\t\t\tif (typeof jest === 'undefined') {\r\n\t\t\t\tif (!toastStack.parentElement) {\r\n\t\t\t\t\tdocument.body.append(toastStack);\r\n\t\t\t\t}\r\n\t\t\t\ttoastStack.append(this.host);\r\n\t\t\t}\r\n\r\n\t\t\trequestAnimationFrame(() => this.show());\r\n\r\n\t\t\tthis.host.addEventListener(\r\n\t\t\t\t'o-toast-hide',\r\n\t\t\t\t() => {\r\n\t\t\t\t\tresolve();\r\n\t\t\t\t},\r\n\t\t\t\t{ once: true }\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\t/** Pauses the autoHide functionality. */\r\n\tprivate pauseAutoHide() {\r\n\t\tclearTimeout(this.autoHideTimeout);\r\n\t}\r\n\r\n\t/** Resets the autoHide timer. */\r\n\tprivate resetAutoHide() {\r\n\t\tif (this.open && this.duration < Infinity) {\r\n\t\t\tthis.autoHideTimeout = window.setTimeout(() => this.hide(), this.duration);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Restarts the autoHide timer. */\r\n\tprivate restartAutoHide() {\r\n\t\tthis.pauseAutoHide();\r\n\t\tthis.resetAutoHide();\r\n\t}\r\n\r\n\tprivate handleCloseClick = () => {\r\n\t\tthis.hide();\r\n\t};\r\n\r\n\tprivate handleMouseEnter = () => {\r\n\t\tthis.pauseAutoHide();\r\n\t};\r\n\r\n\tprivate handleMouseLeave = () => {\r\n\t\tthis.resetAutoHide();\r\n\t};\r\n\r\n\t/* istanbul ignore next */\r\n\tprivate handleTransitionEnd = (event: TransitionEvent) => {\r\n\t\tconst target = event.target as HTMLElement;\r\n\t\tif (event.propertyName === 'opacity' && target.classList.contains('toast')) {\r\n\t\t\tthis.isVisible = this.open;\r\n\t\t}\r\n\t};\r\n\r\n\tprivate getIconDetails() {\r\n\t\tswitch (this.variant) {\r\n\t\t\tcase 'success':\r\n\t\t\t\treturn { iconName: 'circle-check' as IconName, iconColor: 'spring_green' };\r\n\t\t\tcase 'warning':\r\n\t\t\t\treturn { iconName: 'circle-exclamation' as IconName, iconColor: 'expire_orange' };\r\n\t\t\tcase 'danger':\r\n\t\t\t\treturn { iconName: 'circle-xmark' as IconName, iconColor: 'flame_red' };\r\n\t\t\tcase 'neutral':\r\n\t\t\t\treturn { iconName: 'circle-info' as IconName, iconColor: 'white' };\r\n\t\t\tcase 'primary':\r\n\t\t\tdefault:\r\n\t\t\t\treturn { iconName: 'circle-info' as IconName, iconColor: 'accent_blue_1' };\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getVariantClasses() {\r\n\t\tswitch (this.variant) {\r\n\t\t\tcase 'success':\r\n\t\t\t\treturn 'border-spring_green';\r\n\t\t\tcase 'warning':\r\n\t\t\t\treturn 'border-expire_orange';\r\n\t\t\tcase 'danger':\r\n\t\t\t\treturn 'border-flame_red';\r\n\t\t\tcase 'neutral':\r\n\t\t\t\treturn 'border-white';\r\n\t\t\tcase 'primary':\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'border-accent_blue_1';\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\t// Return null if the toast is not visible\r\n\t\tif (!this.isVisible) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst { iconName, iconColor } = this.getIconDetails();\r\n\r\n\t\tconst baseClass =\r\n\t\t\t'flex items-center transition-opacity duration-300 ease-in-out border-t-4 rounded-lg shadow-lg bg-header_blue bg-opacity-90 text-white w-[330px] xl:w-[440px] px-[25px] py-[17px] mb-3.5';\r\n\t\tconst stateClass = this.isExiting\r\n\t\t\t? 'opacity-0 -translate-y-4'\r\n\t\t\t: this.isEntering\r\n\t\t\t\t? 'opacity-0 translate-y-4'\r\n\t\t\t\t: 'opacity-100 translate-y-0';\r\n\t\tconst variantClass = this.getVariantClasses();\r\n\r\n\t\treturn (\r\n\t\t\t<Host>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclass={`${baseClass} ${stateClass} ${variantClass}`}\r\n\t\t\t\t\trole=\"alert\"\r\n\t\t\t\t\taria-live=\"assertive\"\r\n\t\t\t\t\taria-atomic=\"true\"\r\n\t\t\t\t\taria-hidden={!this.open}\r\n\t\t\t\t\tonTransitionEnd={this.handleTransitionEnd}\r\n\t\t\t\t\tonMouseEnter={this.handleMouseEnter}\r\n\t\t\t\t\tonMouseLeave={this.handleMouseLeave}\r\n\t\t\t\t>\r\n\t\t\t\t\t<o-icon name={iconName} color={iconColor} size=\"md\" class=\"pr-7\"></o-icon>\r\n\t\t\t\t\t<div class=\"text-sm flex-1 overflow-hidden\">\r\n\t\t\t\t\t\t<slot />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{this.closable && (\r\n\t\t\t\t\t\t<div class=\"relative top-[-10px]\">\r\n\t\t\t\t\t\t\t<o-icon-button\r\n\t\t\t\t\t\t\t\tname=\"xmark\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\t\t\t\tonClick={this.handleCloseClick}\r\n\t\t\t\t\t\t\t\tlabel=\"Close\"\r\n\t\t\t\t\t\t\t\tclass=\"scale-[1.4]\"\r\n\t\t\t\t\t\t\t></o-icon-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</Host>\r\n\t\t);\r\n\t}\r\n}\r\n"],"mappings":"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","ignoreList":[]}