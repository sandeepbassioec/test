{"version":3,"file":"o-tooltip.js","sourceRoot":"","sources":["../../../src/components/o-tooltip/o-tooltip.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { EventEmitter } from '@stencil/core';\r\nimport { Component, Element, Event, Host, Method, Prop, Watch, h } from '@stencil/core';\r\n\r\n@Component({\r\n\ttag: 'o-tooltip',\r\n\tstyleUrl: 'o-tooltip.scss',\r\n\tshadow: true\r\n})\r\nexport class OTooltip {\r\n\tprivate popup: HTMLOPopupElement;\r\n\tprivate body: HTMLElement;\r\n\tprivate hoverTimeout: number;\r\n\tprivate animationTimeout: number;\r\n\tprivate isAnimating: boolean = false;\r\n\r\n\t/** Reference to the host element */\r\n\t@Element() host: HTMLOTooltipElement;\r\n\r\n\t/** The text content to be displayed in the tooltip */\r\n\t@Prop() content: string = '';\r\n\r\n\t/** The open state of the tooltip, defaults to closed (false) */\r\n\t@Prop({ mutable: true }) open: boolean = false;\r\n\r\n\t/** Position of the tooltip relative to the target */\r\n\t@Prop() placement:\r\n\t\t| 'top'\r\n\t\t| 'top-start'\r\n\t\t| 'top-end'\r\n\t\t| 'bottom'\r\n\t\t| 'bottom-start'\r\n\t\t| 'bottom-end'\r\n\t\t| 'right'\r\n\t\t| 'right-start'\r\n\t\t| 'right-end'\r\n\t\t| 'left'\r\n\t\t| 'left-start'\r\n\t\t| 'left-end' = 'top';\r\n\r\n\t/** Whether the tooltip is disabled, preventing user interaction. */\r\n\t@Prop() disabled: boolean = false;\r\n\r\n\t/** If true, sets the popup positioning strategy to fixed instead of absolute - can be used to get around overflow issues */\r\n\t@Prop() hoist: boolean = false;\r\n\r\n\t/** The trigger type of the tooltip, separated by a space - can be hover, focus, click, manual, or a combination */\r\n\t@Prop() trigger: string = 'hover focus';\r\n\r\n\t/** Maximum width (in rem) of the tooltip popover, allowing optional text wrapping */\r\n\t@Prop() maxWidth: number | null = 20;\r\n\r\n\t/** Emitted when tooltip shown */\r\n\t@Event() oShow: EventEmitter<void>;\r\n\r\n\t/** Emitted when tooltip hidden */\r\n\t@Event() oHide: EventEmitter<void>;\r\n\r\n\t/** Emitted after tooltip shown */\r\n\t@Event() oAfterShow: EventEmitter<void>;\r\n\r\n\t/** Emitted after tooltip hidden */\r\n\t@Event() oAfterHide: EventEmitter<void>;\r\n\r\n\t@Watch('open')\r\n\tasync handleOpenChange() {\r\n\t\t// Prevent race conditions from multiple open/close calls\r\n\t\tif (this.isAnimating) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.open) {\r\n\t\t\tif (this.disabled) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.isAnimating = true;\r\n\r\n\t\t\ttry {\r\n\t\t\t\t// Show\r\n\t\t\t\tthis.oShow.emit();\r\n\t\t\t\tdocument.addEventListener('keydown', this.handleDocumentKeyDown);\r\n\r\n\t\t\t\tawait this.stopAnimations();\r\n\t\t\t\tthis.body.hidden = false;\r\n\t\t\t\tthis.popup.active = true;\r\n\r\n\t\t\t\tconst config = this.getAnimationConfig('show');\r\n\t\t\t\tawait this.animateTooltip(config);\r\n\r\n\t\t\t\tthis.oAfterShow.emit();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.warn('o-tooltip show animation failed:', error);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.isAnimating = false;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.isAnimating = true;\r\n\r\n\t\t\ttry {\r\n\t\t\t\t// Hide\r\n\t\t\t\tthis.oHide.emit();\r\n\t\t\t\tdocument.removeEventListener('keydown', this.handleDocumentKeyDown);\r\n\r\n\t\t\t\tawait this.stopAnimations();\r\n\r\n\t\t\t\tconst config = this.getAnimationConfig('hide');\r\n\t\t\t\tawait this.animateTooltip(config);\r\n\r\n\t\t\t\tthis.popup.active = false;\r\n\t\t\t\tthis.body.hidden = true;\r\n\r\n\t\t\t\tthis.oAfterHide.emit();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.warn('o-tooltip hide animation failed:', error);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.isAnimating = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t@Watch('content')\r\n\t@Watch('hoist')\r\n\t@Watch('placement')\r\n\thandleOptionsChange() {\r\n\t\tthis.popup.reposition();\r\n\t}\r\n\r\n\t@Watch('disabled')\r\n\thandleDisabledChange() {\r\n\t\tif (this.disabled && this.open) {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t@Method()\r\n\tasync show() {\r\n\t\tif (this.open) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\tthis.open = true;\r\n\t}\r\n\r\n\t@Method()\r\n\tasync hide() {\r\n\t\tif (!this.open) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\tthis.open = false;\r\n\t}\r\n\r\n\tconnectedCallback() {\r\n\t\tthis.host.addEventListener('focus', this.handleFocus, true);\r\n\t\tthis.host.addEventListener('blur', this.handleBlur, true);\r\n\t\tthis.host.addEventListener('click', this.handleClick);\r\n\t\tthis.host.addEventListener('mouseover', this.handleMouseOver);\r\n\t\tthis.host.addEventListener('mouseout', this.handleMouseOut);\r\n\t}\r\n\r\n\tdisconnectedCallback() {\r\n\t\tthis.host.removeEventListener('focus', this.handleFocus, true);\r\n\t\tthis.host.removeEventListener('blur', this.handleBlur, true);\r\n\t\tthis.host.removeEventListener('click', this.handleClick);\r\n\t\tthis.host.removeEventListener('mouseover', this.handleMouseOver);\r\n\t\tthis.host.removeEventListener('mouseout', this.handleMouseOut);\r\n\t\tdocument.removeEventListener('keydown', this.handleDocumentKeyDown);\r\n\r\n\t\t// Clean all timeouts\r\n\t\tif (this.hoverTimeout) {\r\n\t\t\tclearTimeout(this.hoverTimeout);\r\n\t\t\tthis.hoverTimeout = undefined;\r\n\t\t}\r\n\t\tif (this.animationTimeout) {\r\n\t\t\tclearTimeout(this.animationTimeout);\r\n\t\t\tthis.animationTimeout = undefined;\r\n\t\t}\r\n\t\t// Reset animation state\r\n\t\tthis.isAnimating = false;\r\n\t}\r\n\r\n\thasTrigger(triggerType: string) {\r\n\t\tconst triggers = this.trigger.split(' ');\r\n\t\treturn triggers.includes(triggerType);\r\n\t}\r\n\r\n\t/* istanbul ignore next */\r\n\thandleFocus = () => {\r\n\t\tif (this.hasTrigger('focus')) {\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\t/* istanbul ignore next */\r\n\thandleBlur = () => {\r\n\t\tif (this.hasTrigger('focus')) {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t};\r\n\r\n\t/* istanbul ignore next */\r\n\thandleClick = () => {\r\n\t\tif (this.hasTrigger('click')) {\r\n\t\t\tif (this.open) {\r\n\t\t\t\tthis.hide();\r\n\t\t\t} else {\r\n\t\t\t\tthis.show();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\thandleDocumentKeyDown = (event: KeyboardEvent) => {\r\n\t\tif (event.key === 'Escape') {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t};\r\n\r\n\t/* istanbul ignore next */\r\n\thandleMouseOver = () => {\r\n\t\tif (this.hasTrigger('hover')) {\r\n\t\t\tclearTimeout(this.hoverTimeout);\r\n\t\t\tthis.hoverTimeout = window.setTimeout(() => this.show(), 150);\r\n\t\t}\r\n\t};\r\n\r\n\t/* istanbul ignore next */\r\n\thandleMouseOut = () => {\r\n\t\tif (this.hasTrigger('hover')) {\r\n\t\t\tclearTimeout(this.hoverTimeout);\r\n\t\t\tthis.hoverTimeout = window.setTimeout(() => this.hide(), 0);\r\n\t\t}\r\n\t};\r\n\r\n\tprivate async stopAnimations(): Promise<void> {\r\n\t\t// Stop animations on the body element, similar to Shoelace\r\n\t\tif (typeof jest === 'undefined' && this.body) {\r\n\t\t\tconst animations = this.body.getAnimations();\r\n\t\t\tanimations.forEach((animation) => animation.cancel());\r\n\t\t}\r\n\t\treturn Promise.resolve();\r\n\t}\r\n\r\n\t/* istanbul ignore next */\r\n\tprivate getTransformOrigin(): string {\r\n\t\tconst placement = this.placement.split('-')[0];\r\n\t\tswitch (placement) {\r\n\t\t\tcase 'top':\r\n\t\t\t\treturn 'bottom';\r\n\t\t\tcase 'bottom':\r\n\t\t\t\treturn 'top';\r\n\t\t\tcase 'left':\r\n\t\t\t\treturn 'right';\r\n\t\t\tcase 'right':\r\n\t\t\t\treturn 'left';\r\n\t\t\tdefault:\r\n\t\t\t\treturn 'center';\r\n\t\t}\r\n\t}\r\n\r\n\t/* istanbul ignore next */\r\n\tprivate getAnimationConfig(type: 'show' | 'hide') {\r\n\t\tconst baseConfig = {\r\n\t\t\tduration: 150,\r\n\t\t\ttransition: 'opacity 150ms ease, transform 150ms ease'\r\n\t\t};\r\n\r\n\t\tif (type === 'show') {\r\n\t\t\treturn {\r\n\t\t\t\t...baseConfig,\r\n\t\t\t\tinitialScale: 0.8,\r\n\t\t\t\tfinalScale: 1,\r\n\t\t\t\tinitialOpacity: '0',\r\n\t\t\t\tfinalOpacity: '1'\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t...baseConfig,\r\n\t\t\tinitialScale: 1,\r\n\t\t\tfinalScale: 0.8,\r\n\t\t\tinitialOpacity: '1',\r\n\t\t\tfinalOpacity: '0'\r\n\t\t};\r\n\t}\r\n\r\n\t/* istanbul ignore next */\r\n\tprivate async animateTooltip(config: ReturnType<typeof this.getAnimationConfig>): Promise<void> {\r\n\t\tconst popupElement = this.popup.shadowRoot?.querySelector('div[class*=\"isolate\"]') as HTMLElement;\r\n\t\tif (!popupElement) return;\r\n\r\n\t\t// Reposition first\r\n\t\tif (config.finalScale === 1) {\r\n\t\t\tawait this.popup.reposition();\r\n\t\t}\r\n\r\n\t\treturn new Promise<void>((resolve) => {\r\n\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\t// Set transform origin and get current positioning\r\n\t\t\t\tconst transformOrigin = this.getTransformOrigin();\r\n\t\t\t\tpopupElement.style.transformOrigin = transformOrigin;\r\n\t\t\t\t// Get current transform and adjust for existing scale if hiding\r\n\t\t\t\tlet currentTransform = popupElement.style.transform;\r\n\t\t\t\tif (config.finalScale === 0.8) {\r\n\t\t\t\t\tcurrentTransform = currentTransform.replace(/\\s*scale\\([^)]*\\)/, '');\r\n\t\t\t\t}\r\n\t\t\t\t// Apply initial state without transition\r\n\t\t\t\tpopupElement.style.transition = 'none';\r\n\t\t\t\tpopupElement.style.transform = `${currentTransform} scale(${config.initialScale})`;\r\n\t\t\t\tpopupElement.style.opacity = config.initialOpacity;\r\n\t\t\t\t// Force reflow\r\n\t\t\t\tpopupElement.offsetHeight;\r\n\t\t\t\t// Animate to final state\r\n\t\t\t\trequestAnimationFrame(() => {\r\n\t\t\t\t\tpopupElement.style.transition = config.transition;\r\n\t\t\t\t\tpopupElement.style.transform = `${currentTransform} scale(${config.finalScale})`;\r\n\t\t\t\t\tpopupElement.style.opacity = config.finalOpacity;\r\n\t\t\t\t\t// Wait for animation to complete\r\n\t\t\t\t\tthis.animationTimeout = window.setTimeout(() => {\r\n\t\t\t\t\t\tif (config.finalScale === 0.8) {\r\n\t\t\t\t\t\t\tpopupElement.style.transition = '';\r\n\t\t\t\t\t\t\tpopupElement.style.opacity = '';\r\n\t\t\t\t\t\t\tpopupElement.style.transform = currentTransform;\r\n\t\t\t\t\t\t\tpopupElement.style.transformOrigin = '';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.animationTimeout = undefined;\r\n\t\t\t\t\t\tresolve();\r\n\t\t\t\t\t}, config.duration);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet maxWidthString = '';\r\n\t\tmaxWidthString = this.maxWidth ? `${this.maxWidth}rem` : '';\r\n\r\n\t\treturn (\r\n\t\t\t<Host>\r\n\t\t\t\t<o-popup\r\n\t\t\t\t\tref={(el) => (this.popup = el)}\r\n\t\t\t\t\tdistance={10}\r\n\t\t\t\t\tplacement={this.placement}\r\n\t\t\t\t\tstrategy={this.hoist ? 'fixed' : 'absolute'}\r\n\t\t\t\t\tarrow\r\n\t\t\t\t\thoverBridge\r\n\t\t\t\t>\r\n\t\t\t\t\t<span slot=\"anchor\" aria-describedby=\"tooltip\" class=\"inline-block w-fit\">\r\n\t\t\t\t\t\t<slot></slot>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tref={(el) => (this.body = el)}\r\n\t\t\t\t\t\trole=\"tooltip\"\r\n\t\t\t\t\t\tclass={`block ${this.maxWidth ? '' : 'w-max'} text-start rounded-lg bg-main_text text-white px-4 py-2 text-sm leading-[21px] font-normal pointer-events-none z-60`}\r\n\t\t\t\t\t\taria-live={this.open ? 'polite' : 'off'}\r\n\t\t\t\t\t\tstyle={{ maxWidth: `${this.maxWidth ? maxWidthString : ''}` }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<slot name=\"content\">{this.content}</slot>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</o-popup>\r\n\t\t\t</Host>\r\n\t\t);\r\n\t}\r\n}\r\n"]}