{"version":3,"file":"o-dialog.js","sourceRoot":"","sources":["../../../src/components/o-dialog/o-dialog.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { EventEmitter } from '@stencil/core';\r\nimport { Component, Host, h, State, Method, Prop, Element, Watch, Event } from '@stencil/core';\r\nimport type { FocusTrap } from '../../internal/a11y';\r\nimport { createFocusTrap, setupSlotChangeHandlers } from '../../internal/a11y';\r\n\r\n@Component({\r\n\ttag: 'o-dialog',\r\n\tstyleUrl: 'o-dialog.scss',\r\n\tshadow: true\r\n})\r\nexport class ODialog {\r\n\t@Element() el: HTMLODialogElement;\r\n\r\n\t/** State to track if the dialog is open. */\r\n\t@State() isOpen: boolean = false;\r\n\r\n\t/** Indicates whether or not the dialog is open. */\r\n\t@Prop({ reflect: true }) open: boolean = false;\r\n\r\n\t/** The label for the dialog header. */\r\n\t@Prop({ reflect: true }) label = '';\r\n\r\n\t/** Determines whether the close button is shown. */\r\n\t@Prop({ reflect: true }) noClose: boolean = false;\r\n\r\n\tprivate panel: HTMLElement;\r\n\tprivate overlay: HTMLElement;\r\n\tprivate bodySlot: HTMLSlotElement;\r\n\tprivate footerSlot: HTMLSlotElement;\r\n\tprivate focusTrap: FocusTrap | null = null;\r\n\tprivate slotCleanup: (() => void) | null = null;\r\n\tprivate focusTrapOptions = {\r\n\t\tautoFocus: false\r\n\t};\r\n\r\n\t/** State to prevent calling hide if already hiding */\r\n\t@State() isHiding: boolean = false;\r\n\r\n\t/** Emitted when the dialog opens */\r\n\t@Event() oShow: EventEmitter<void>;\r\n\r\n\t/** Emitted when the dialog closes */\r\n\t@Event() oHide: EventEmitter<void>;\r\n\r\n\t/** Emitted when dialog close is requested with the source of the request */\r\n\t@Event() oRequestClose: EventEmitter<{ source: 'close-button' | 'keyboard' | 'overlay' }>;\r\n\r\n\t/** Watches for changes to the 'open' property and updates the dialog state accordingly. */\r\n\t@Watch('open')\r\n\tasync watchOpen(newValue: boolean) {\r\n\t\tif (this.isHiding) return;\r\n\t\tthis.isOpen = newValue;\r\n\t\tif (this.isOpen) {\r\n\t\t\tawait this.show();\r\n\t\t} else {\r\n\t\t\tawait this.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Watches for changes to the 'noClose' property. */\r\n\t@Watch('noClose')\r\n\twatchNoClose(_newValue: boolean) {}\r\n\r\n\t/** Sets the initial state of the dialog based on the 'open' property before the component loads. */\r\n\tcomponentWillLoad() {\r\n\t\tthis.isOpen = this.open;\r\n\t\tif (this.isOpen) {\r\n\t\t\tdocument.body.style.overflow = 'hidden';\r\n\t\t}\r\n\t}\r\n\r\n\t/** Clean up listeners when component is removed */\r\n\tdisconnectedCallback() {\r\n\t\tthis.cleanupAccessibility();\r\n\t\tdocument.removeEventListener('keydown', this.handleKeyDown);\r\n\t}\r\n\r\n\t/** Clean up focus trap and related accessibility resources */\r\n\tprivate cleanupAccessibility() {\r\n\t\tif (this.focusTrap) {\r\n\t\t\tthis.focusTrap.deactivate();\r\n\t\t\tthis.focusTrap = null;\r\n\t\t}\r\n\r\n\t\tif (this.slotCleanup) {\r\n\t\t\tthis.slotCleanup();\r\n\t\t\tthis.slotCleanup = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/** Initialize and activate focus trap  */\r\n\tprivate async setupAccessibility() {\r\n\t\t// Clean up any existing trap first\r\n\t\tthis.cleanupAccessibility();\r\n\r\n\t\tif (!this.panel) return;\r\n\r\n\t\ttry {\r\n\t\t\t// Create the focus trap\r\n\t\t\tthis.focusTrap = createFocusTrap({\r\n\t\t\t\trootElement: this.panel,\r\n\t\t\t\t...this.focusTrapOptions\r\n\t\t\t});\r\n\r\n\t\t\tif (this.bodySlot || this.footerSlot) {\r\n\t\t\t\tconst slots = [this.bodySlot, this.footerSlot].filter(Boolean);\r\n\t\t\t\tif (slots.length > 0 && this.focusTrap) {\r\n\t\t\t\t\tthis.slotCleanup = setupSlotChangeHandlers(this.focusTrap, slots);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 50));\r\n\t\t\t// Activate the focus trap\r\n\t\t\tif (this.focusTrap) {\r\n\t\t\t\tthis.focusTrap.activate();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error initializing accessibility:', error);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Public method to show the dialog. */\r\n\t@Method()\r\n\tasync show() {\r\n\t\tthis.isOpen = true;\r\n\t\tdocument.body.style.overflow = 'hidden';\r\n\t\tdocument.addEventListener('keydown', this.handleKeyDown);\r\n\t\tawait new Promise((resolve) => requestAnimationFrame(resolve));\r\n\t\tawait this.animateDialog('dialog.show', 'dialog.overlay.show');\r\n\r\n\t\tthis.oShow.emit();\r\n\t\tawait this.setupAccessibility();\r\n\t}\r\n\r\n\t/** Public method to hide the dialog. */\r\n\t@Method()\r\n\tasync hide() {\r\n\t\tif (this.isHiding) return;\r\n\t\tthis.isHiding = true;\r\n\t\tthis.cleanupAccessibility();\r\n\t\tawait new Promise((resolve) => requestAnimationFrame(resolve));\r\n\t\tawait this.animateDialog('dialog.hide', 'dialog.overlay.hide');\r\n\t\tthis.isOpen = false;\r\n\t\tdocument.body.style.overflow = 'auto';\r\n\t\tdocument.removeEventListener('keydown', this.handleKeyDown);\r\n\r\n\t\tthis.oHide.emit();\r\n\t\tthis.isHiding = false;\r\n\t}\r\n\r\n\t/** Animate the dialog and overlay */\r\n\tprivate async animateDialog(dialogAnimation: string, overlayAnimation: string) {\r\n\t\tconst panelAnimation = this.getAnimation(dialogAnimation);\r\n\t\tconst overlayAnimationConfig = this.getAnimation(overlayAnimation);\r\n\t\tif (this.panel && this.overlay) {\r\n\t\t\tawait Promise.all([\r\n\t\t\t\tthis.animateTo(this.panel, panelAnimation.keyframes, panelAnimation.options),\r\n\t\t\t\tthis.animateTo(this.overlay, overlayAnimationConfig.keyframes, overlayAnimationConfig.options)\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Get animation configuration */\r\n\tprivate getAnimation(animationName: string) {\r\n\t\tconst animations = {\r\n\t\t\t'dialog.show': {\r\n\t\t\t\tkeyframes: [\r\n\t\t\t\t\t{ opacity: 0, transform: 'scale(0.8)' },\r\n\t\t\t\t\t{ opacity: 1, transform: 'scale(1)' }\r\n\t\t\t\t],\r\n\t\t\t\toptions: { duration: 250, easing: 'ease' }\r\n\t\t\t},\r\n\t\t\t'dialog.hide': {\r\n\t\t\t\tkeyframes: [\r\n\t\t\t\t\t{ opacity: 1, transform: 'scale(1)' },\r\n\t\t\t\t\t{ opacity: 0, transform: 'scale(0.8)' }\r\n\t\t\t\t],\r\n\t\t\t\toptions: { duration: 250, easing: 'ease' }\r\n\t\t\t},\r\n\t\t\t'dialog.overlay.show': {\r\n\t\t\t\tkeyframes: [{ opacity: 0 }, { opacity: 1 }],\r\n\t\t\t\toptions: { duration: 250 }\r\n\t\t\t},\r\n\t\t\t'dialog.overlay.hide': {\r\n\t\t\t\tkeyframes: [{ opacity: 1 }, { opacity: 0 }],\r\n\t\t\t\toptions: { duration: 250 }\r\n\t\t\t},\r\n\t\t\t'dialog.shake': {\r\n\t\t\t\tkeyframes: [\r\n\t\t\t\t\t{ transform: 'translateX(0)' },\r\n\t\t\t\t\t{ transform: 'translateX(-5px)' },\r\n\t\t\t\t\t{ transform: 'translateX(5px)' },\r\n\t\t\t\t\t{ transform: 'translateX(0)' }\r\n\t\t\t\t],\r\n\t\t\t\toptions: { duration: 300, easing: 'ease-in-out' }\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn animations[animationName] || { keyframes: [], options: {} };\r\n\t}\r\n\r\n\t/** Animate to a specific element */\r\n\tprivate async animateTo(element: HTMLElement, keyframes: Keyframe[], options: KeyframeAnimationOptions) {\r\n\t\tif (element) {\r\n\t\t\tconst animation = element.animate(keyframes, options);\r\n\t\t\treturn new Promise<void>((resolve) => {\r\n\t\t\t\tanimation.onfinish = () => resolve();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Handles the close button click event. */\r\n\tprivate handleCloseButtonClick = () => {\r\n\t\tthis.requestClose('close-button');\r\n\t};\r\n\r\n\t/** Handles the overlay click event to close the dialog. */\r\n\tprivate handleOverlayClick = (_event: MouseEvent) => {\r\n\t\tthis.requestClose('overlay');\r\n\t};\r\n\r\n\t/** Handles keyboard events for closing the dialog. */\r\n\tprivate handleKeyDown = (event: KeyboardEvent) => {\r\n\t\tif (event.key === 'Escape') {\r\n\t\t\tthis.requestClose('keyboard');\r\n\t\t}\r\n\t};\r\n\r\n\t/** Requests to close the dialog and emits a custom event. */\r\n\tprivate requestClose(source: 'close-button' | 'keyboard' | 'overlay') {\r\n\t\tconst closeEvent = this.oRequestClose.emit({ source });\r\n\t\t// If the event is not prevented, close the dialog.\r\n\t\tif (!closeEvent.defaultPrevented) {\r\n\t\t\tthis.hide();\r\n\t\t} else {\r\n\t\t\tthis.shakeDialog();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Triggers the shake animation on the dialog */\r\n\tprivate async shakeDialog() {\r\n\t\tif (this.panel) {\r\n\t\t\tconst shakeAnimation = this.getAnimation('dialog.shake');\r\n\t\t\tawait this.animateTo(this.panel, shakeAnimation.keyframes, shakeAnimation.options);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Renders the dialog component. */\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Host>\r\n\t\t\t\t<dialog\r\n\t\t\t\t\tclass={this.isOpen ? 'flex items-center justify-center fixed inset-0 z-50 p-4 bg-transparent w-full' : ''}\r\n\t\t\t\t>\r\n\t\t\t\t\t{/* Overlay */}\r\n\t\t\t\t\t{this.isOpen && (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\ttabindex={-1}\r\n\t\t\t\t\t\t\tclass=\"fixed inset-0 bg-black bg-opacity-60 z-60 transition-opacity\"\r\n\t\t\t\t\t\t\tonClick={this.handleOverlayClick}\r\n\t\t\t\t\t\t\tref={(el) => (this.overlay = el as HTMLElement)}\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Dialog */}\r\n\t\t\t\t\t{this.isOpen && (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tid=\"basic-modal\"\r\n\t\t\t\t\t\t\tclass=\"static z-60 overflow-hidden flex-1 items-center justify-center rounded-lg max-w-[37.5em] focus:outline-none\"\r\n\t\t\t\t\t\t\trole=\"dialog\"\r\n\t\t\t\t\t\t\taria-modal=\"true\"\r\n\t\t\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t\t\t\tref={(el) => (this.panel = el as HTMLElement)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div class=\"bg-white shadow-dialog w-full overflow-auto max-h-full rounded-lg\">\r\n\t\t\t\t\t\t\t\t{/* Header */}\r\n\t\t\t\t\t\t\t\t{!(this.noClose && !this.label) && (\r\n\t\t\t\t\t\t\t\t\t<div class=\"p-4 border-b border-tab_grey dark:border-gray-700/60\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t{this.label && <h4 class=\"text-[21px] text-main_text\">{this.label}</h4>}\r\n\t\t\t\t\t\t\t\t\t\t\t{!this.noClose && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<o-icon-button name=\"close\" size=\"sm\" onClick={this.handleCloseButtonClick}></o-icon-button>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t{/* Body */}\r\n\t\t\t\t\t\t\t\t<div tabindex={-1} class=\"px-8 py-6 border-b border-tab_grey max-h-[68.333vh] overflow-auto\">\r\n\t\t\t\t\t\t\t\t\t<div tabindex={-1} class=\"text-sm text-main_text\">\r\n\t\t\t\t\t\t\t\t\t\t<slot ref={(el) => (this.bodySlot = el as HTMLSlotElement)}></slot> {/* Slot for dialog content. */}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{/* Footer */}\r\n\t\t\t\t\t\t\t\t<div class=\"px-4 py-2\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"flex flex-wrap justify-end space-x-2\">\r\n\t\t\t\t\t\t\t\t\t\t<slot name=\"footer\" ref={(el) => (this.footerSlot = el as HTMLSlotElement)}></slot>{' '}\r\n\t\t\t\t\t\t\t\t\t\t{/* Slot for footer content. */}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</dialog>\r\n\t\t\t</Host>\r\n\t\t);\r\n\t}\r\n}\r\n"]}