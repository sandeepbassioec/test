{"version":3,"file":"o-drawer.js","sourceRoot":"","sources":["../../../src/components/o-drawer/o-drawer.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { EventEmitter } from '@stencil/core';\r\nimport { Component, Host, h, State, Method, Prop, Element, Watch, Event } from '@stencil/core';\r\nimport type { FocusTrap } from '../../internal/a11y';\r\nimport { createFocusTrap, setupSlotChangeHandlers } from '../../internal/a11y';\r\n\r\n@Component({\r\n\ttag: 'o-drawer',\r\n\tstyleUrl: 'o-drawer.scss',\r\n\tshadow: true\r\n})\r\nexport class ODrawer {\r\n\t@Element() el: HTMLODrawerElement;\r\n\r\n\t/** State to track if the drawer is open. */\r\n\t@State() isOpen: boolean = false;\r\n\r\n\t/** Indicates whether or not the drawer is open. */\r\n\t@Prop({ reflect: true }) open: boolean = false;\r\n\r\n\t/** The label for the aria label. */\r\n\t@Prop({ reflect: true }) label = '';\r\n\r\n\t/** Determines whether the close button is shown. */\r\n\t@Prop({ reflect: true }) noClose: boolean = false;\r\n\r\n\tprivate panel: HTMLElement;\r\n\tprivate overlay: HTMLElement;\r\n\tprivate bodySlot: HTMLSlotElement;\r\n\tprivate footerSlot: HTMLSlotElement;\r\n\tprivate focusTrap: FocusTrap | null = null;\r\n\tprivate slotCleanup: (() => void) | null = null;\r\n\tprivate focusTrapOptions = {\r\n\t\tautoFocus: false\r\n\t};\r\n\r\n\t/** Track pending operations to prevent conflicts */\r\n\t@State() isAnimating: boolean = false;\r\n\tprivate pendingOperation: 'show' | 'hide' | null = null;\r\n\r\n\t/** Emitted when the drawer opens */\r\n\t@Event() oShow: EventEmitter<void>;\r\n\r\n\t/** Emitted when the drawer closes */\r\n\t@Event() oHide: EventEmitter<void>;\r\n\r\n\t/** Emitted when drawer close is requested with the source of the request */\r\n\t@Event() oRequestClose: EventEmitter<{ source: 'close-button' | 'keyboard' | 'overlay' }>;\r\n\r\n\t/** Watches for changes to the 'open' property and updates the drawer state accordingly. */\r\n\t@Watch('open')\r\n\tasync watchOpen(newValue: boolean) {\r\n\t\t// If ongoing animating, ignore\r\n\t\tif (\r\n\t\t\tthis.isAnimating &&\r\n\t\t\t((newValue && this.pendingOperation === 'show') || (!newValue && this.pendingOperation === 'hide'))\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Cancel any pending operation and start new one\r\n\t\tif (newValue) {\r\n\t\t\tthis.pendingOperation = 'show';\r\n\t\t\tawait this.show();\r\n\t\t} else {\r\n\t\t\tthis.pendingOperation = 'hide';\r\n\t\t\tawait this.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Watches for changes to the 'noClose' property. */\r\n\t@Watch('noClose')\r\n\twatchNoClose(_newValue: boolean) {}\r\n\r\n\t/** Sets the initial state of the drawer based on the 'open' property before the component loads. */\r\n\tcomponentWillLoad() {\r\n\t\tthis.isOpen = this.open;\r\n\t\tif (this.isOpen) {\r\n\t\t\tdocument.body.style.overflow = 'hidden';\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Clean up event listeners when the component is removed\r\n\t */\r\n\tdisconnectedCallback() {\r\n\t\tthis.cleanupAccessibility();\r\n\t\tdocument.removeEventListener('keydown', this.handleKeyDown);\r\n\t}\r\n\r\n\t/**\r\n\t * Clean up focus trap and related resources\r\n\t */\r\n\tprivate cleanupAccessibility() {\r\n\t\tif (this.focusTrap) {\r\n\t\t\tthis.focusTrap.deactivate();\r\n\t\t\tthis.focusTrap = null;\r\n\t\t}\r\n\t\tif (this.slotCleanup) {\r\n\t\t\tthis.slotCleanup();\r\n\t\t\tthis.slotCleanup = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initialize and activate the focus trap with proper timing\r\n\t */\r\n\tprivate async setupAccessibility() {\r\n\t\t// Clean up any existing focus trap\r\n\t\tthis.cleanupAccessibility();\r\n\t\tif (!this.panel) return;\r\n\t\ttry {\r\n\t\t\t// Create the focus trap with the panel as the root element\r\n\t\t\tthis.focusTrap = createFocusTrap({\r\n\t\t\t\trootElement: this.panel,\r\n\t\t\t\t...this.focusTrapOptions\r\n\t\t\t});\r\n\t\t\t// Setup slot change handlers right after creating the focus trap\r\n\t\t\tif (this.bodySlot || this.footerSlot) {\r\n\t\t\t\tconst slots = [this.bodySlot, this.footerSlot].filter(Boolean);\r\n\t\t\t\tif (slots.length > 0 && this.focusTrap) {\r\n\t\t\t\t\tthis.slotCleanup = setupSlotChangeHandlers(this.focusTrap, slots);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 50));\r\n\t\t\t// Activate the focus trap\r\n\t\t\tif (this.focusTrap) {\r\n\t\t\t\tthis.focusTrap.activate();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error setting up accessibility features:', error);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Public method to show the drawer. */\r\n\t@Method()\r\n\tasync show() {\r\n\t\t// Prevent multiple simultaneous show operations\r\n\t\tif (this.isAnimating && this.pendingOperation === 'show') return;\r\n\r\n\t\tthis.isAnimating = true;\r\n\t\tthis.pendingOperation = 'show';\r\n\t\tthis.isOpen = true;\r\n\r\n\t\tdocument.body.style.overflow = 'hidden';\r\n\t\tdocument.addEventListener('keydown', this.handleKeyDown);\r\n\r\n\t\tawait new Promise((resolve) => requestAnimationFrame(resolve));\r\n\t\tawait this.animateDialog('drawer.show', 'drawer.overlay.show');\r\n\r\n\t\tthis.oShow.emit();\r\n\r\n\t\t// Setup accessibility features\r\n\t\tawait this.setupAccessibility();\r\n\r\n\t\tthis.isAnimating = false;\r\n\t\tthis.pendingOperation = null;\r\n\t}\r\n\r\n\t/** Public method to hide the drawer. */\r\n\t@Method()\r\n\tasync hide() {\r\n\t\t// Prevent multiple simultaneous hide operations\r\n\t\tif (this.isAnimating && this.pendingOperation === 'hide') return;\r\n\r\n\t\tthis.isAnimating = true;\r\n\t\tthis.pendingOperation = 'hide';\r\n\r\n\t\t// Clean up accessibility features\r\n\t\tthis.cleanupAccessibility();\r\n\r\n\t\tawait new Promise((resolve) => requestAnimationFrame(resolve));\r\n\t\tawait this.animateDialog('drawer.hide', 'drawer.overlay.hide');\r\n\r\n\t\t// Update state after animation\r\n\t\tthis.isOpen = false;\r\n\t\tdocument.body.style.overflow = 'auto';\r\n\t\tdocument.removeEventListener('keydown', this.handleKeyDown);\r\n\r\n\t\tthis.oHide.emit();\r\n\r\n\t\tthis.isAnimating = false;\r\n\t\tthis.pendingOperation = null;\r\n\t}\r\n\r\n\t/** Animate the drawer and overlay */\r\n\tprivate async animateDialog(dialogAnimation: string, overlayAnimation: string) {\r\n\t\tconst panelAnimation = this.getAnimation(dialogAnimation);\r\n\t\tconst overlayAnimationConfig = this.getAnimation(overlayAnimation);\r\n\t\tif (this.panel && this.overlay) {\r\n\t\t\tawait Promise.all([\r\n\t\t\t\tthis.animateTo(this.panel, panelAnimation.keyframes, panelAnimation.options),\r\n\t\t\t\tthis.animateTo(this.overlay, overlayAnimationConfig.keyframes, overlayAnimationConfig.options)\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Get animation configuration */\r\n\tprivate getAnimation(animationName: string) {\r\n\t\tconst animations = {\r\n\t\t\t'drawer.show': {\r\n\t\t\t\tkeyframes: [\r\n\t\t\t\t\t{ opacity: 0, transform: 'translateX(100%)' },\r\n\t\t\t\t\t{ opacity: 1, transform: 'translateX(0)' }\r\n\t\t\t\t],\r\n\t\t\t\toptions: { duration: 250, easing: 'ease', fill: 'forwards' }\r\n\t\t\t},\r\n\t\t\t'drawer.hide': {\r\n\t\t\t\tkeyframes: [\r\n\t\t\t\t\t{ opacity: 1, transform: 'translateX(0)' },\r\n\t\t\t\t\t{ opacity: 0, transform: 'translateX(100%)' }\r\n\t\t\t\t],\r\n\t\t\t\toptions: { duration: 250, easing: 'ease', fill: 'forwards' }\r\n\t\t\t},\r\n\t\t\t'drawer.overlay.show': {\r\n\t\t\t\tkeyframes: [{ opacity: 0 }, { opacity: 1 }],\r\n\t\t\t\toptions: { duration: 250, fill: 'forwards' }\r\n\t\t\t},\r\n\t\t\t'drawer.overlay.hide': {\r\n\t\t\t\tkeyframes: [{ opacity: 1 }, { opacity: 0 }],\r\n\t\t\t\toptions: { duration: 250, fill: 'forwards' }\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn animations[animationName] || { keyframes: [], options: {} };\r\n\t}\r\n\r\n\t/** Animate to a specific element */\r\n\tprivate async animateTo(element: HTMLElement, keyframes: Keyframe[], options: KeyframeAnimationOptions) {\r\n\t\tif (element) {\r\n\t\t\tconst animation = element.animate(keyframes, options);\r\n\t\t\treturn new Promise<void>((resolve) => {\r\n\t\t\t\tanimation.onfinish = () => resolve();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Handles the close button click event. */\r\n\tprivate handleCloseButtonClick = () => {\r\n\t\tthis.requestClose('close-button');\r\n\t};\r\n\r\n\t/** Handles the overlay click event to close the drawer. */\r\n\tprivate handleOverlayClick = (_event: MouseEvent) => {\r\n\t\tthis.requestClose('overlay');\r\n\t};\r\n\r\n\t/** Handles keyboard events for closing the drawer. */\r\n\tprivate handleKeyDown = (event: KeyboardEvent) => {\r\n\t\tif (event.key === 'Escape') {\r\n\t\t\tthis.requestClose('keyboard');\r\n\t\t}\r\n\t};\r\n\r\n\t/** Requests to close the drawer and dispatches a custom event. */\r\n\tprivate requestClose(source: 'close-button' | 'keyboard' | 'overlay') {\r\n\t\tconst closeEvent = this.oRequestClose.emit({ source });\r\n\t\tif (!closeEvent.defaultPrevented) {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\t// Check if Footer slot is filled\r\n\t\tconst hasFooter = !!this.el.querySelector('[slot=\"footer\"]');\r\n\r\n\t\treturn (\r\n\t\t\t<Host>\r\n\t\t\t\t<div class={this.isOpen ? 'flex items-center justify-center fixed inset-0 z-50' : ''}>\r\n\t\t\t\t\t{/* Overlay */}\r\n\t\t\t\t\t{this.isOpen && (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\ttabindex={-1}\r\n\t\t\t\t\t\t\tclass=\"fixed inset-0 bg-table_header bg-opacity-60 z-60 transition-opacity\"\r\n\t\t\t\t\t\t\tonClick={this.handleOverlayClick}\r\n\t\t\t\t\t\t\tref={(el) => (this.overlay = el as HTMLElement)}\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Drawer */}\r\n\t\t\t\t\t{this.isOpen && (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tid=\"basic-drawer\"\r\n\t\t\t\t\t\t\tclass=\"fixed right-0 h-full w-[28em] bg-white shadow-lg z-60 flex flex-col focus:outline-none max-w-full\"\r\n\t\t\t\t\t\t\trole=\"dialog\"\r\n\t\t\t\t\t\t\taria-modal=\"true\"\r\n\t\t\t\t\t\t\taria-label={this.label || 'Drawer'}\r\n\t\t\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t\t\t\tref={(el) => {\r\n\t\t\t\t\t\t\t\tthis.panel = el as HTMLElement;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{/* Header */}\r\n\t\t\t\t\t\t\t{!(this.noClose && !this.label) && (\r\n\t\t\t\t\t\t\t\t<div class=\"px-5 py-8 flex justify-end items-center\">\r\n\t\t\t\t\t\t\t\t\t{!this.noClose && (\r\n\t\t\t\t\t\t\t\t\t\t<o-icon-button name=\"close\" size=\"sm\" onClick={this.handleCloseButtonClick}></o-icon-button>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{/* Body */}\r\n\t\t\t\t\t\t\t<div tabindex={-1} class=\"px-7 flex-1 overflow-auto text-sm text-main_text\">\r\n\t\t\t\t\t\t\t\t<slot ref={(el) => (this.bodySlot = el as HTMLSlotElement)}></slot>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Footer */}\r\n\t\t\t\t\t\t\t{/* Conditionally render Footer Section */}\r\n\t\t\t\t\t\t\t{hasFooter && (\r\n\t\t\t\t\t\t\t\t<div class=\"py-7 px-5 flex justify-end\">\r\n\t\t\t\t\t\t\t\t\t<slot name=\"footer\" ref={(el) => (this.footerSlot = el as HTMLSlotElement)}></slot>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</Host>\r\n\t\t);\r\n\t}\r\n}\r\n"]}