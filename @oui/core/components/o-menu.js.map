{"file":"o-menu.js","mappings":"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","names":["OMenu","__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/o-menu/o-menu.scss?tag=o-menu&encapsulation=shadow","src/components/o-menu/o-menu.tsx"],"sourcesContent":[":host {\r\n\tdisplay: block;\r\n}\r\n","import type { EventEmitter } from '@stencil/core';\r\nimport { Component, Element, Event, h, Method } from '@stencil/core';\r\nimport type { OMenuItem } from '../o-menu-item/o-menu-item';\r\n\r\nexport interface OMenuSelectPayload {\r\n\titem: OMenuItem;\r\n}\r\n\r\n@Component({\r\n\ttag: 'o-menu',\r\n\tstyleUrl: 'o-menu.scss',\r\n\tshadow: true\r\n})\r\nexport class OMenu {\r\n\tprivate menu: HTMLSlotElement;\r\n\tprivate menuItems: OMenuItem[];\r\n\tprivate activeItem: OMenuItem;\r\n\t@Element() host!: HTMLOMenuElement;\r\n\r\n\t@Event() oMenuSelect!: EventEmitter<OMenuSelectPayload>;\r\n\r\n\t/* istanbul ignore next */\r\n\thandleClick = (event: MouseEvent) => {\r\n\t\tconst composedPath = event.composedPath();\r\n\t\tconst target = composedPath.find((el: Element) => el?.getAttribute?.('role') === 'menuitem');\r\n\r\n\t\tif (!target) return;\r\n\r\n\t\t(target as HTMLElement).blur();\r\n\t\tthis.oMenuSelect.emit({ item: target as unknown as OMenuItem });\r\n\t};\r\n\r\n\t/* istanbul ignore next */\r\n\thandleMouseDown = (event: MouseEvent) => {\r\n\t\tconst target = event.target as HTMLElement;\r\n\r\n\t\tif (this.isMenuItem(target)) this.setCurrentItem(target as unknown as OMenuItem);\r\n\t};\r\n\r\n\t/* istanbul ignore next */\r\n\thandleKeyDown = (event: KeyboardEvent) => {\r\n\t\tif (event.key === 'Enter' || event.key === ' ') {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tif (this.activeItem.index === 0)\r\n\t\t\t\t(this.activeItem as unknown as HTMLElement).shadowRoot.querySelector('div').click();\r\n\t\t} else if (['ArrowDown', 'ArrowUp', 'Home', 'End'].includes(event.key)) {\r\n\t\t\tlet index = this.activeItem ? this.menuItems.indexOf(this.activeItem) : 0;\r\n\r\n\t\t\tif (this.menuItems.length > 0) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\r\n\t\t\t\tif (event.key === 'ArrowDown') {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t} else if (event.key === 'ArrowUp') {\r\n\t\t\t\t\tindex--;\r\n\t\t\t\t} else if (event.key === 'Home') {\r\n\t\t\t\t\tindex = 0;\r\n\t\t\t\t} else if (event.key === 'End') {\r\n\t\t\t\t\tindex = this.menuItems.length - 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (index < 0) {\r\n\t\t\t\t\tindex = this.menuItems.length - 1;\r\n\t\t\t\t}\r\n\t\t\t\tif (index > this.menuItems.length - 1) {\r\n\t\t\t\t\tindex = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.setCurrentItem(this.menuItems[index]);\r\n\t\t\t\tthis.menuItems[index].setFocus();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tasync handleSlotChange() {\r\n\t\tconst items = await this.getMenuItems();\r\n\t\tthis.menuItems = await this.getMenuItems();\r\n\r\n\t\tif (items.length > 0) this.setCurrentItem(items[0]);\r\n\t}\r\n\r\n\tisMenuItem(item: HTMLElement) {\r\n\t\treturn item.tagName.toLowerCase() === 'o-menu-item';\r\n\t}\r\n\r\n\tasync getCurrentItem() {\r\n\t\treturn (await this.getMenuItems()).find((i) => i.index === 0);\r\n\t}\r\n\r\n\t@Method()\r\n\tasync setCurrentItem(item: OMenuItem) {\r\n\t\tthis.activeItem = item;\r\n\t\tconst items = await this.getMenuItems();\r\n\r\n\t\titems.forEach((i) => {\r\n\t\t\ti.index = i === item ? 0 : -1;\r\n\t\t});\r\n\t}\r\n\r\n\t@Method()\r\n\tasync getMenuItems() {\r\n\t\treturn [...this.menu.assignedElements?.({ flatten: true })].filter((el: HTMLElement) => {\r\n\t\t\tif (el.inert || !this.isMenuItem(el)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}) as unknown as OMenuItem[];\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\trole=\"menu\"\r\n\t\t\t\tonClick={this.handleClick}\r\n\t\t\t\tonMouseDown={this.handleMouseDown}\r\n\t\t\t\tonKeyDown={this.handleKeyDown}\r\n\t\t\t\tclass=\"bg-background-default border-width-sm border-border-default rounded-radius-lg py-2\"\r\n\t\t\t>\r\n\t\t\t\t<slot ref={(el) => (this.menu = el as HTMLSlotElement)} onSlotchange={() => this.handleSlotChange()}></slot>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n"],"version":3}