{"file":"o-drawer.js","mappings":"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","names":["ODrawer","__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/o-drawer/o-drawer.scss?tag=o-drawer&encapsulation=shadow","src/components/o-drawer/o-drawer.tsx"],"sourcesContent":[":host {\r\n\tdisplay: block;\r\n}\r\n","import type { EventEmitter } from '@stencil/core';\r\nimport { Component, Host, h, State, Method, Prop, Element, Watch, Event } from '@stencil/core';\r\nimport type { FocusTrap } from '../../internal/a11y';\r\nimport { createFocusTrap, setupSlotChangeHandlers } from '../../internal/a11y';\r\n\r\n@Component({\r\n\ttag: 'o-drawer',\r\n\tstyleUrl: 'o-drawer.scss',\r\n\tshadow: true\r\n})\r\nexport class ODrawer {\r\n\t@Element() el: HTMLODrawerElement;\r\n\r\n\t/** State to track if the drawer is open. */\r\n\t@State() isOpen: boolean = false;\r\n\r\n\t/** Indicates whether or not the drawer is open. */\r\n\t@Prop({ reflect: true }) open: boolean = false;\r\n\r\n\t/** The label for the aria label. */\r\n\t@Prop({ reflect: true }) label = '';\r\n\r\n\t/** Determines whether the close button is shown. */\r\n\t@Prop({ reflect: true }) noClose: boolean = false;\r\n\r\n\tprivate panel: HTMLElement;\r\n\tprivate overlay: HTMLElement;\r\n\tprivate bodySlot: HTMLSlotElement;\r\n\tprivate footerSlot: HTMLSlotElement;\r\n\tprivate focusTrap: FocusTrap | null = null;\r\n\tprivate slotCleanup: (() => void) | null = null;\r\n\tprivate focusTrapOptions = {\r\n\t\tautoFocus: false\r\n\t};\r\n\r\n\t/** Track pending operations to prevent conflicts */\r\n\t@State() isAnimating: boolean = false;\r\n\tprivate pendingOperation: 'show' | 'hide' | null = null;\r\n\r\n\t/** Emitted when the drawer opens */\r\n\t@Event() oShow: EventEmitter<void>;\r\n\r\n\t/** Emitted when the drawer closes */\r\n\t@Event() oHide: EventEmitter<void>;\r\n\r\n\t/** Emitted when drawer close is requested with the source of the request */\r\n\t@Event() oRequestClose: EventEmitter<{ source: 'close-button' | 'keyboard' | 'overlay' }>;\r\n\r\n\t/** Watches for changes to the 'open' property and updates the drawer state accordingly. */\r\n\t@Watch('open')\r\n\tasync watchOpen(newValue: boolean) {\r\n\t\t// If ongoing animating, ignore\r\n\t\tif (\r\n\t\t\tthis.isAnimating &&\r\n\t\t\t((newValue && this.pendingOperation === 'show') || (!newValue && this.pendingOperation === 'hide'))\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Cancel any pending operation and start new one\r\n\t\tif (newValue) {\r\n\t\t\tthis.pendingOperation = 'show';\r\n\t\t\tawait this.show();\r\n\t\t} else {\r\n\t\t\tthis.pendingOperation = 'hide';\r\n\t\t\tawait this.hide();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Watches for changes to the 'noClose' property. */\r\n\t@Watch('noClose')\r\n\twatchNoClose(_newValue: boolean) {}\r\n\r\n\t/** Sets the initial state of the drawer based on the 'open' property before the component loads. */\r\n\tcomponentWillLoad() {\r\n\t\tthis.isOpen = this.open;\r\n\t\tif (this.isOpen) {\r\n\t\t\tdocument.body.style.overflow = 'hidden';\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Clean up event listeners when the component is removed\r\n\t */\r\n\tdisconnectedCallback() {\r\n\t\tthis.cleanupAccessibility();\r\n\t\tdocument.removeEventListener('keydown', this.handleKeyDown);\r\n\t}\r\n\r\n\t/**\r\n\t * Clean up focus trap and related resources\r\n\t */\r\n\tprivate cleanupAccessibility() {\r\n\t\tif (this.focusTrap) {\r\n\t\t\tthis.focusTrap.deactivate();\r\n\t\t\tthis.focusTrap = null;\r\n\t\t}\r\n\t\tif (this.slotCleanup) {\r\n\t\t\tthis.slotCleanup();\r\n\t\t\tthis.slotCleanup = null;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initialize and activate the focus trap with proper timing\r\n\t */\r\n\tprivate async setupAccessibility() {\r\n\t\t// Clean up any existing focus trap\r\n\t\tthis.cleanupAccessibility();\r\n\t\tif (!this.panel) return;\r\n\t\ttry {\r\n\t\t\t// Create the focus trap with the panel as the root element\r\n\t\t\tthis.focusTrap = createFocusTrap({\r\n\t\t\t\trootElement: this.panel,\r\n\t\t\t\t...this.focusTrapOptions\r\n\t\t\t});\r\n\t\t\t// Setup slot change handlers right after creating the focus trap\r\n\t\t\tif (this.bodySlot || this.footerSlot) {\r\n\t\t\t\tconst slots = [this.bodySlot, this.footerSlot].filter(Boolean);\r\n\t\t\t\tif (slots.length > 0 && this.focusTrap) {\r\n\t\t\t\t\tthis.slotCleanup = setupSlotChangeHandlers(this.focusTrap, slots);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 50));\r\n\t\t\t// Activate the focus trap\r\n\t\t\tif (this.focusTrap) {\r\n\t\t\t\tthis.focusTrap.activate();\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error setting up accessibility features:', error);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Public method to show the drawer. */\r\n\t@Method()\r\n\tasync show() {\r\n\t\t// Prevent multiple simultaneous show operations\r\n\t\tif (this.isAnimating && this.pendingOperation === 'show') return;\r\n\r\n\t\tthis.isAnimating = true;\r\n\t\tthis.pendingOperation = 'show';\r\n\t\tthis.isOpen = true;\r\n\r\n\t\tdocument.body.style.overflow = 'hidden';\r\n\t\tdocument.addEventListener('keydown', this.handleKeyDown);\r\n\r\n\t\tawait new Promise((resolve) => requestAnimationFrame(resolve));\r\n\t\tawait this.animateDialog('drawer.show', 'drawer.overlay.show');\r\n\r\n\t\tthis.oShow.emit();\r\n\r\n\t\t// Setup accessibility features\r\n\t\tawait this.setupAccessibility();\r\n\r\n\t\tthis.isAnimating = false;\r\n\t\tthis.pendingOperation = null;\r\n\t}\r\n\r\n\t/** Public method to hide the drawer. */\r\n\t@Method()\r\n\tasync hide() {\r\n\t\t// Prevent multiple simultaneous hide operations\r\n\t\tif (this.isAnimating && this.pendingOperation === 'hide') return;\r\n\r\n\t\tthis.isAnimating = true;\r\n\t\tthis.pendingOperation = 'hide';\r\n\r\n\t\t// Clean up accessibility features\r\n\t\tthis.cleanupAccessibility();\r\n\r\n\t\tawait new Promise((resolve) => requestAnimationFrame(resolve));\r\n\t\tawait this.animateDialog('drawer.hide', 'drawer.overlay.hide');\r\n\r\n\t\t// Update state after animation\r\n\t\tthis.isOpen = false;\r\n\t\tdocument.body.style.overflow = 'auto';\r\n\t\tdocument.removeEventListener('keydown', this.handleKeyDown);\r\n\r\n\t\tthis.oHide.emit();\r\n\r\n\t\tthis.isAnimating = false;\r\n\t\tthis.pendingOperation = null;\r\n\t}\r\n\r\n\t/** Animate the drawer and overlay */\r\n\tprivate async animateDialog(dialogAnimation: string, overlayAnimation: string) {\r\n\t\tconst panelAnimation = this.getAnimation(dialogAnimation);\r\n\t\tconst overlayAnimationConfig = this.getAnimation(overlayAnimation);\r\n\t\tif (this.panel && this.overlay) {\r\n\t\t\tawait Promise.all([\r\n\t\t\t\tthis.animateTo(this.panel, panelAnimation.keyframes, panelAnimation.options),\r\n\t\t\t\tthis.animateTo(this.overlay, overlayAnimationConfig.keyframes, overlayAnimationConfig.options)\r\n\t\t\t]);\r\n\t\t}\r\n\t}\r\n\r\n\t/** Get animation configuration */\r\n\tprivate getAnimation(animationName: string) {\r\n\t\tconst animations = {\r\n\t\t\t'drawer.show': {\r\n\t\t\t\tkeyframes: [\r\n\t\t\t\t\t{ opacity: 0, transform: 'translateX(100%)' },\r\n\t\t\t\t\t{ opacity: 1, transform: 'translateX(0)' }\r\n\t\t\t\t],\r\n\t\t\t\toptions: { duration: 250, easing: 'ease', fill: 'forwards' }\r\n\t\t\t},\r\n\t\t\t'drawer.hide': {\r\n\t\t\t\tkeyframes: [\r\n\t\t\t\t\t{ opacity: 1, transform: 'translateX(0)' },\r\n\t\t\t\t\t{ opacity: 0, transform: 'translateX(100%)' }\r\n\t\t\t\t],\r\n\t\t\t\toptions: { duration: 250, easing: 'ease', fill: 'forwards' }\r\n\t\t\t},\r\n\t\t\t'drawer.overlay.show': {\r\n\t\t\t\tkeyframes: [{ opacity: 0 }, { opacity: 1 }],\r\n\t\t\t\toptions: { duration: 250, fill: 'forwards' }\r\n\t\t\t},\r\n\t\t\t'drawer.overlay.hide': {\r\n\t\t\t\tkeyframes: [{ opacity: 1 }, { opacity: 0 }],\r\n\t\t\t\toptions: { duration: 250, fill: 'forwards' }\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn animations[animationName] || { keyframes: [], options: {} };\r\n\t}\r\n\r\n\t/** Animate to a specific element */\r\n\tprivate async animateTo(element: HTMLElement, keyframes: Keyframe[], options: KeyframeAnimationOptions) {\r\n\t\tif (element) {\r\n\t\t\tconst animation = element.animate(keyframes, options);\r\n\t\t\treturn new Promise<void>((resolve) => {\r\n\t\t\t\tanimation.onfinish = () => resolve();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn Promise.resolve();\r\n\t\t}\r\n\t}\r\n\r\n\t/** Handles the close button click event. */\r\n\tprivate handleCloseButtonClick = () => {\r\n\t\tthis.requestClose('close-button');\r\n\t};\r\n\r\n\t/** Handles the overlay click event to close the drawer. */\r\n\tprivate handleOverlayClick = (_event: MouseEvent) => {\r\n\t\tthis.requestClose('overlay');\r\n\t};\r\n\r\n\t/** Handles keyboard events for closing the drawer. */\r\n\tprivate handleKeyDown = (event: KeyboardEvent) => {\r\n\t\tif (event.key === 'Escape') {\r\n\t\t\tthis.requestClose('keyboard');\r\n\t\t}\r\n\t};\r\n\r\n\t/** Requests to close the drawer and dispatches a custom event. */\r\n\tprivate requestClose(source: 'close-button' | 'keyboard' | 'overlay') {\r\n\t\tconst closeEvent = this.oRequestClose.emit({ source });\r\n\t\tif (!closeEvent.defaultPrevented) {\r\n\t\t\tthis.hide();\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\t// Check if Footer slot is filled\r\n\t\tconst hasFooter = !!this.el.querySelector('[slot=\"footer\"]');\r\n\r\n\t\treturn (\r\n\t\t\t<Host>\r\n\t\t\t\t<div class={this.isOpen ? 'flex items-center justify-center fixed inset-0 z-50' : ''}>\r\n\t\t\t\t\t{/* Overlay */}\r\n\t\t\t\t\t{this.isOpen && (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\ttabindex={-1}\r\n\t\t\t\t\t\t\tclass=\"fixed inset-0 bg-table_header bg-opacity-60 z-60 transition-opacity\"\r\n\t\t\t\t\t\t\tonClick={this.handleOverlayClick}\r\n\t\t\t\t\t\t\tref={(el) => (this.overlay = el as HTMLElement)}\r\n\t\t\t\t\t\t></div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Drawer */}\r\n\t\t\t\t\t{this.isOpen && (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tid=\"basic-drawer\"\r\n\t\t\t\t\t\t\tclass=\"fixed right-0 h-full w-[28em] bg-white shadow-lg z-60 flex flex-col focus:outline-none max-w-full\"\r\n\t\t\t\t\t\t\trole=\"dialog\"\r\n\t\t\t\t\t\t\taria-modal=\"true\"\r\n\t\t\t\t\t\t\taria-label={this.label || 'Drawer'}\r\n\t\t\t\t\t\t\ttabIndex={0}\r\n\t\t\t\t\t\t\tref={(el) => {\r\n\t\t\t\t\t\t\t\tthis.panel = el as HTMLElement;\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{/* Header */}\r\n\t\t\t\t\t\t\t{!(this.noClose && !this.label) && (\r\n\t\t\t\t\t\t\t\t<div class=\"px-5 py-8 flex justify-end items-center\">\r\n\t\t\t\t\t\t\t\t\t{!this.noClose && (\r\n\t\t\t\t\t\t\t\t\t\t<o-icon-button name=\"close\" size=\"sm\" onClick={this.handleCloseButtonClick}></o-icon-button>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{/* Body */}\r\n\t\t\t\t\t\t\t<div tabindex={-1} class=\"px-7 flex-1 overflow-auto text-sm text-main_text\">\r\n\t\t\t\t\t\t\t\t<slot ref={(el) => (this.bodySlot = el as HTMLSlotElement)}></slot>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Footer */}\r\n\t\t\t\t\t\t\t{/* Conditionally render Footer Section */}\r\n\t\t\t\t\t\t\t{hasFooter && (\r\n\t\t\t\t\t\t\t\t<div class=\"py-7 px-5 flex justify-end\">\r\n\t\t\t\t\t\t\t\t\t<slot name=\"footer\" ref={(el) => (this.footerSlot = el as HTMLSlotElement)}></slot>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</Host>\r\n\t\t);\r\n\t}\r\n}\r\n"],"version":3}